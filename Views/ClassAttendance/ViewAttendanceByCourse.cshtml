@using SchoolSystem.Models.ClassManagement
@model List<AttendanceSummaryViewModel>

@{
    ViewData["Title"] = "ข้อมูลการเข้าเรียน";
}

<h2 class="text-2xl font-semibold mb-4">@ViewData["Title"]</h2>

@if (Model.Any())
{
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200">
            <thead class="bg-gray-100">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">รหัสนักเรียน</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ชื่อ</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">จำนวนการเข้าเรียน</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">จำนวนการขาดเรียน</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">จำนวนการมาสาย</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">จำนวนการขาดเรียนที่ได้รับการยกเว้น</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                @foreach (var summary in Model)
                {
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">@summary.StudentCode</td>
                        <td class="px-6 py-4 whitespace-nowrap">@summary.Name</td>
                        <td class="px-6 py-4 whitespace-nowrap">@summary.PresentCount</td>
                        <td class="px-6 py-4 whitespace-nowrap">@summary.AbsentCount</td>
                        <td class="px-6 py-4 whitespace-nowrap">@summary.LateCount</td>
                        <td class="px-6 py-4 whitespace-nowrap">@summary.ExcusedCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <form method="post" asp-action="UpdateAttendanceSummary" asp-route-cmId="@ViewBag.CM_Id">
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">อัปเดตข้อมูลการเข้าเรียน</button>
        </form>
    </div>
}
else
{
    <div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded relative" role="alert">
        <strong class="font-bold">ข้อมูล!</strong>
        <span class="block sm:inline">ไม่พบข้อมูลการเข้าเรียนสำหรับวิชานี้</span>
    </div>
}